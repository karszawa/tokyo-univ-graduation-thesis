\chapter{課題と展望}

# 栄養情報の統計

<!--
- 現行のシステムでは合計を表示するだけ
- もっといろいろな表示方法を増やしたい
  - 一週間の平均
  - 摂取量推移グラフ
-->

管理栄養士はアスリートの食事を分析する際に様々な手法を用いてデータ解析を行っている。
それは例えば摂取栄養量の変位であったり一週間程度の期間での平均値であったりする。
しかしながら、現行のシステムでは日毎の栄養量の合計値とPFCバランス [^pfc] しか表示していない。
そのため、管理栄養士による栄養分析をより容易にするために、栄養情報をさらに整理して表示する必要がある。
当面の目標としては上述した栄養素ごとの摂取量の変位グラフや一週間の摂取栄養量の平均を表示するということを行いたい。

[^pfc]: たんぱく質(Protein)・脂質(Fat)・炭水化物(Carbohydrate)の比

# 体組成値の記録

<!--
- 現在はGoogle Formで入力している
- 最低限体重は入力したい
- 他のデータも取れればいいが煩雑さとのトレードオフなのでUI/UXは考えないといけない
-->

本システムにはアスリートの体組成値を管理する仕組みはない。
しかし、管理栄養士にとって栄養指導を行うためにはアスリートの体組成値の情報が必須であり、特に体重の値は欠かせない。
現在はアスリートが毎日Google Form[^google-form]を用いて体組成値を入力している。
管理栄養士は本システムを利用する際にGoogle Formによる情報を逐一参照しているが、
情報が一元管理されていないため参照の手間がかかる。
また、アスリートの食事記録と管理栄養士の栄養指導のデータを蓄勢したいという本システムの目的からしても、
アスリートの体組成値の情報はなんとしても取り入れたい。
入力すべき情報が増えることはアスリートにとって負担になるため、
情報入力が容易かどうかという点に留意する必要はあるが、
本システムでも体組成値の入力と保存を可能にしたい。

[^google-form]: \url{https://docs.google.com/forms}

# 栄養データの正確性

<!--
- 栄養データは品目ごとに固定の値で、あくまで目安としてしか使えない
- EatSmartの食事製品のデータは主要な栄養素しか表示されず、エネルギーしかないものまである
- 別のデータソースを使ったほうがいい？
- 管理栄養士から栄養が間違っているとの報告あり
- アスリートにはあくまで目安ということを強調して伝える必要がある
- 管理栄養士が栄養情報を編集できるようにすればより正確な栄養データベースができる？
-->

本システムによる栄養データの特定は、食事画像から料理品目を推定して料理品目ごとの栄養データベースを参照するという方法で実現している。
この方法による栄養データの正確性は栄養データベースの多様性と詳細度に依存している。
本システムで利用している栄養データベースはFoodLog\cite{bib:foodlog}のデータベースとEatSmart\cite{bib:eatsmart}のデータベースの二種類がある。
FoodLogのデータベースは登録件数が約1500件で、EatSmartは約9万件である。
FoodLogのデータベースは登録件数は少ないものの栄養情報は詳細に入力されている。
逆にEatSmartのデータベースは登録件数は多いものの栄養情報に欠落が多く、
食事記録を作成する際に間違った栄養量で登録を行ってしまうことがある。
この傾向は製品として販売されている食事において特に顕著で、
FoodLogでは栄養素が10種類以上利用できるのに対してEatSmartの食事製品ではエネルギーしか利用できないものもある。
欠落している情報を本システムで推測することはできないので仕方のない面もあるが、
栄養指導を行う際の統計に及ぼす影響はできれば排除したい。
それを実現するためにはたとえばEatSmart以外のデータソースを用いたり、
管理栄養士が栄養データを編集できるようにしてしまうという方法が考えられる。
なお、国内ではEatSmartは最大規模のデータソースであるため、
それ以外のデータソースがこれより信頼できるかどうかは個々に検証が必要になる。
管理栄養士がデータを補正するという案は、情報の信頼性という点においては十分で、システムに用いてもは問題ない。
そういった仕組みを導入するまでは管理栄養士・アスリート双方にデータはあくまで参考であるということを周知しなければならない。

# サービスのオープン化

<!--
- 現在はDOMEだけだがオープンにしたらデータはもっと増える
-->

本システムの主たる目的として栄養指導の自動化のためのデータ収集という役割があるが、
そのためには様々なアスリートに対する様々な管理栄養士の栄養指導データが必要になる。
現在、本システムを利用しているのは株式会社ドーム\cite{bib:dome}の管理栄養士とその担当のアスリートだけである。
人数にすると管理栄養士は数人でアスリートは100人未満の規模であって、本システムの目的に対して十分な一人は言えない。
利用するユーザーを増やすためには本システムを一般利用できるようにし、
複数の組織のアスリート・管理栄養士に本システムを利用してもらう必要がある。
そのためには管理栄養士を管理するためのコンソールや、組織を管理するためのコンソールが必要になる。
図\ref{fig:feature-system}は以上で説明したシステムの入れ子構造を説明したものである。

![サービスの拡大のために必要になる管理システム](fig/feature-system.eps){width=0.6\linewidth}

# 栄養指導データの収集

<!--
- データベースとしての整理がまだ
-->

本研究で開発するシステムを利用することで、アスリートの体組成値・食生活などと管理栄養士のアドバイスを対応付けたデータベースを作成することができる。
将来的にはこのデータを利用してアスリート向けの栄養指導システムを構築したい。
そういったシステムの開発のためには集積したデータが簡単に利用できる必要がある。
現在は食事記録のデータと栄養指導のデータが別々のデータストアに保存されているため、
統一的にデータを利用することができない。
よって、まずはそれらのデータを一箇所に集める必要がある。
データを集積するためのデータウェアハウスとしてはGoogle BigQuery[^big-query]を検討している。
BigQueryはデータの集積・分析が簡単でGoogleの機械学習基盤とも簡単に連携できるため、本システムの目的に即している。
また、データの分析だけならばBigQueryのようなデータウェアハウスの利用で十分だが、
それらをわかりやすく可視化するためにWebシステムの構築も検討している。

[^big-query]: \url{https://cloud.google.com/bigquery}

![データ分析のためのデータ集積](fig/collect-data.eps){width=\linewidth}

<!-- # 栄養指導の段階的な自動化 -->

<!--
- 栄養指導の自動化の方法
- 選手ごとの栄養目標を決めるのは管理栄養士の腕の見せ所なので難しい
- 目標値さえ決まってしまえば不足分を補うレシピの提案ができる
  - 過去の食事記録を参照して選手が摂りやすい食事を提案したりできたら面白い
-->
